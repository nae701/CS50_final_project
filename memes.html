<!DOCTYPE html>

<html>
    <head>
        <title>Memes</title>
    </head>
    <body>
        <h1>Harvard Memes for Elitist 1% Tweens</h1>
        <form>
            <input autofocus autocomplete="off" name="comment" placeholder="Comment" type="text">
            <input type="submit" value="Post">
        </form>
        <ul></ul>
        <script>

            const FRIENDS = {
                'Bill Gates': 'BillGates',
                'Mark Zuckerberg': 'zuck'
            };

            document.querySelector('form').onsubmit = function(e) {
                e.preventDefault();
                let comment = document.querySelector('input[name=comment]');
                let li = '<li>' + linkify(comment.value) + '</li>';
                document.querySelector('ul').innerHTML += li;
                comment.value = '';
            };

            function linkify(s) {
                // Converts object into iterable array
                const friends = Object.entries(FRIENDS);

                // Goes through each name and replaces with a link if there is a match
                for (const [name, user] of friends) {
                    s = s.replace(name, '<a href="https://www.facebook.com/' + user +'">'+ name + '</a>');
                }
                return s;
            }

        </script>
    </body>
</html>
